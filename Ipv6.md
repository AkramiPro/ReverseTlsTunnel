در این داکیومنت درمورد آیپی وی سیکس صحبت میکنیم و نحوه استفاده اش با تونل RTT لطفا اگه میخواید از این قابلیت استفاده کنید این مطلب را کامل بخونید چون به راحتی میتونید اشتباه اجرا کنید برنامه را.


# توضیحات اولیه

اولین نکته اینه که باید بدونین سرور ها میتونن ایپی وی ۴ داشته باشن  یا نداشته باشن ؛ ایپی وی سیکس هم همینطور 
یعنی سرور ها میتونن یا فقط ایپی ورژن ۴ یا فقط ایپی ورژن ۶ یا هردو رو با هم داشته باشن

آیپی وی سیکس تقریبا بی نهایت وجود داره مثل آیپی ورژن ۴ تعدادش کم نیست و به همین دلیل رایگان هست ؛ تقریبا همه دیتا سنتر های خارجی وقتی ازشون سرور میخرید میتونید انتخاب کنید که سرور تون آیپی وی ۶ داشته باشه یا نه
همچنین حتی میتونید سرور خارجی بگیرید که فقط ایپی وی ۶ داشته باشه و پول آیپی وی ۴ که نیم یورو هست در ماه حدودا رو ندین.

اما دیتا سنتر های ایرانی ؛ حدوا ۳۰ درصدشون به سرور شما ایپی وی ۶ میتونن بدن چون بغیشون شبکشون از ایپی وی ۶ پشتیبانی نمیکنه 

خوب نکته دوم که مهم هست اینه که:

اگه شما یه سرور بخرید که فقط ایپی وی سیکس داشته باشه؛ فقط میتونید با مقصد هایی ارتباط بگیرید که اون ها  ایپی وی ۶ داشته باشن و نمیتونید به جا هایی که فقط ایپی وی 4 هستن وصل بشید
و همچنین ؛ اگه سرورتون فقط ایپی وی ۴ داشته باشه ؛ فقط با مقاصدی ارتباط میگیرید که ایپی وی ۴ داشته باشن و نمیتونید به جا هایی که فقط ایپی وی ۶ هستن وصل بشید

اما همونطور که بالا گفتم ؛ شما میتونید در سرورتون هم ایپی ۶ داشته باشین هم ایپی وی ۴  و برای ارتباط با مقاصدی که ایپی وی ۶ هستن از ایپی وی سیکس سرورتون استفاده میشه و برای ارتباط با مقاصدی که روی ایپی وی ۴ هستن
از ایپی وی ۴ سرورتون استفاده خواهد شد


# مزایای استفاده از ایپی وی۶ 

1- عدم فیلتر شدن ایپی
همونطور که بالا هم گفتم ایپی وی سیکس تعدادش تقریبا بی نهایته پس در نتیجه فایروال بلاک نمیکنه چون اگه بخواد روی پکت های ایپی وی سیکس وقت بزاره  و بعد از کلی برسی تازه یه ایپی بلاک کنه ؛ خودشو مسخره کرده چون ایپی رایگان هست و به راحتی یه جدید میندازن رو سرور ؛‌کما اینکه خیلی ها مثلا ۱۰ تا ایپی وی سیکس مختلف میندازن رو سرور و با ایجاد لود بالانسر میوتنن تا زمانی که هر ۱۰ تاش فیلتر نشده اتصال برقراره

ولی خوب گفتم نیاز به این کارا نیست ایپی وی سیکس فیلترینگش بی معنیه .

2- قیمت رایگان

# معایب

1- همونطور که گفتم ایپی وی سیکس فیلترینگ رو بی معنی میکنه ؛ پس اگه قرار باشه واقعا فیلترینگ رو شدید کنن و اثر گزار کنن چاره ای ندارن که شبکه ایپی وی سیکس با خارج از کشور رو کلا قطع کنن ؛ کما اینکه مدت ها بود که قطع بود و ممکنه در آینده این اتفاق بفته

2- هم سرور ایران و هم سرور خارج برای ارتباط باید ایپی وی سیکس داشته باشن ؛ که مشکل پیدا کردن سرور ایران با ایپی وی سیکس هست که البته اصلا سخت نیست

3- سرور ایران نمیتونید فقط با ایپی وی سیکس بخرید

بله ؛ خیلی از کاربرای داخل ایران از نت های مختلف استفاده میکنن از فیبر بگیر تا adsl و موبایل و p2p و غیره ؛ به نظرتون همه این ها ایپی وی سیکس در اختیار کاربر قرار میدن تا با همین ایپی وی سیکس به سرور ایرانتون وصل بشه ؟

قطعا خیر ؛ پس نیاز دارید در سرور ایران ایپی وی ۴ رو در کنار ایپی وی سیکس داشته باشید ؛ نمیتونید مثل سرور خارج فقط با ایپی وی ۶ باشه و ایپی وی ۴ نخیرد

# شروع

بهترین روش برای نشون دادن تونل ایپی وی سیکس RTT مثاله پس شروع کنیم

# مثال اول 
میخواهیم ارزون ترین سناریو ممکن رو بسازیم ؛ سرورخارج میگیریم از هتزنر بدون ایپی وی فور یعنی این :



![image](https://github.com/radkesvat/ReverseTlsTunnel/assets/134321679/1dd3080b-9f52-4b4e-8a67-b7b3d01e4766)






خوب سرور که ساخته بشه یه همچین چیزی میبنید 
![image](https://github.com/radkesvat/ReverseTlsTunnel/assets/134321679/b65ea31c-0701-44d9-a1f3-5a41ab87351b)





آیپی وی ۶ که هتزنر به ما نشون میده این هست :

> 2a01:4f9:c011:2013::/64

اما دقت کنید این آیپی وی سیکس ما نیست دقیقا ؛‌ اینو باید تغییر بدیم آخرشو که میشه این آیپی 

> 2a01:4f9:c011:2013::1

خوب حالا ما میتونیم برای تست توی ویندوز که هستیم این آیپی رو پینگ کنیم
> ping -6 2a01:4f9:c011:2013::1

و باید بدون مشکل پینگ بده ؛ اگه رو ویندوز ایپی وی سیکس غیر فعال کرده باشین یا شبکه ای که بهش متصل هستین آیپی وی سیکس نداده باشه بهتون
ارور دریافت میکنید 


خوب الان باید به این ایپی وی سیکس خارجمون ssh بزنیم تا تونل رو روش نصب کنیم ؛ اما یه نکته مهم هست! ؛ توی برنامه ssh مثل پاتی یا کلا هرچی ؛ وقتی میخواید آیپی وی سیکس بزارید
باید داخل براکت قرار بدین یعنی این :

> [2a01:4f9:c011:2013::1]

خوب حالا میتونیم اینو داخل برنامه قرار بدیم و وصل شیم




![image](https://github.com/radkesvat/ReverseTlsTunnel/assets/134321679/44ac6d45-bd9b-4c7f-9ef8-0587a340049a)


جا داره یه بار دیگه تکرار کنم اگه لبتابی که روش هستین ایپی وی سیکس نداشته باشه ssh هم نمیتونین بزنین به خارجتون اگه نتونستید شبکه با ایپی وی سیکس گیر بیارید ؛ سرور هتزنرتونو با ایپی وی ۴ و وی ۶ با هم بسازید 
بعد با ایپی وی ۴ که دارین کارهاتونو انجام بدین بعد ایپی رو از سرور بگیرین 



خوب حالا ما وارد سرور خارج شدیم و میخوایم تونل رو نصب کنیم 
دستور نصب تونل رو اجرا میکنیم ولی خطا میخوریم به این شکل:


![image](https://github.com/radkesvat/ReverseTlsTunnel/assets/134321679/4c87937c-afb1-434b-90f7-dd9403f584fb)



خلاصه بگم ؛ گیت هاب ایپی وی سیکس ساپورت نکرده و ۲ تا راه داریم
یا باید همون سرور هتزنرمونو با ایپی وی ۴ بخریم برنامه رو نصب کنیم و بعد ایپی وی ۴ رو بندازیم دور
یا باید با ftp فایل زیپ برنامه رو دستی ببریم روی کلود ؛ مثلا توی moba xterm میشه درگ کرد فایلو داخل سرور 

خوب پس فایل زیپ رو داخل سرور بردیم ؛ بعد آنزیپ میکنیم و تمام برنامه روی سرور خارج هست و میتونیم اجرا کنیم 


> unzip v5.....zip

> ./RTT --kharej --iran-ip:[xxx:xxx:xxx:xxx::1] --iran-port:443 --toip:127.0.0.1 --toport:443 --password:123 --sni:myket.ir

دقت کنید که ایپی وی سیکس سرور ایرانو باید بهش بدین 

حالا میایم روی سرور ایران ؛ در سرور ایران برنامه رو با دستور نصب خیلی ساده نصب میکنیم چون ایپی وی ۴ هم داریم گیتهاب مشکل ساز نمیشه ؛ بعد اینطوری اجرا میکنیم


./RTT --iran  --lport:443 --password:123 --sni:myket.ir

بله ؛ هیچ چیز خاصی اضافه نشده کاملا عادی اجرا شده ؛ و اینطوری ما با ایپی وی سیکس تونل کردیم ؛ اما کار بر هم میتونه به ایپی وی سیسکس ایران وصل شه برای استفاده و هم ایپی وی ۴ 
بسته به کانفیگی که بهش میدین و دامنه ای که دادین این خواهد بود ؛ دست خودتونه خلاصه



نکته مهم ارتباط بین سرور ایران و خارج هست که با ایپی وی سیکس برقرار شده و فیلتریگ رو عملا بی معنی کرده



خوب الان ایپی وی سیکس خارج رو داریم ؛ حالا باید یه سرور ایران بخریم که ایپی وی سیکس داشته باشه ؛ از کجا ؟ خوب خیلی جا ها مثل هاست ایران ؛ صفر و یک و کلا سرچ کنید خیلی هستن









